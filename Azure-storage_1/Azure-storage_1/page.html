
<!DOCTYPE html>

<html lang="en">

    <head>

        <title>Photo upload</title>

        <script src="azure-storage.blob.min.js" charset="utf-8"></script>
        <script>
            // Blob-related code goes here

            //import * as azureStorageBlob from '';

            function onLoad(){
                const account = {
                    name: "notesaccount",
                    sas:  "?sv=2019-02-02&ss=bfqt&srt=sco&sp=rwdlacup&se=2020-10-20T22:05:38Z&st=2019-10-20T14:05:38Z&spr=https&sig=m4hMEUbqGxu5n4x%2FLVoKUxICKAfPANBLzM%2FQBv6BbkY%3D"
                };

                const blobUri = 'https://' + account.name + '.blob.core.windows.net';
                const blobService = AzureStorage.Blob.createBlobServiceWithSas(blobUri, account.sas);

                var containerName = 'js-photo-upload-test';

                document.getElementById('create-button').addEventListener('click', () => {

                    blobService.createContainerIfNotExists(containerName,  (error, container) => {
                        if (error) {
                            // Handle create container error
                        } else {
                            console.log(container.name);
                        }
                    });

                });

                document.getElementById('upload-button').addEventListener('click', () => {

                    const file = document.getElementById('fileinput').files[0];

                    blobService.createBlockBlobFromBrowserFile(containerName, 
                                                                file.name, 
                                                                file, 
                                                                (error, result) => {
                                                                    if(error) {
                                                                        // Handle blob error
                                                                    } else {
                                                                        console.log('Upload is successful');
                                                                    }
                                                                });

                });

                document.getElementById('list-button').addEventListener('click', () => {

                    blobService.listBlobsSegmented(containerName, null, (error, results) => {
                        if (error) {
                            // Handle list blobs error
                        } else {
                            results.entries.forEach(blob => {
                                console.log(blob.name);
                            });
                        }
                    });
    
                });
            }

        </script>

    </head>

    <body onload="onLoad()">
        <button id="create-button">Create Container</button>

        <input type="file" id="fileinput" />
        <button id="upload-button">Upload</button>

        <button id="list-button">List</button>

        <button id="delete-button">Delete</button>
    </body>

</html>